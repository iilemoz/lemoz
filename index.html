<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="Personal Profile of Ahmed">
    <meta name="theme-color" content="#7c3aed">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <title>Ahmed</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Theme Switcher -->
    <div class="theme-switcher" onclick="toggleThemeMenu()" title="Change Theme">
        <i class="fa-solid fa-palette"></i>
    </div>
    
    <!-- Theme Menu -->
    <div class="theme-menu" id="themeMenu">
        <div class="theme-menu-header">
            <h3><i class="fa-solid fa-palette"></i> Choose Theme</h3>
            <button class="theme-menu-close" onclick="toggleThemeMenu()">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="theme-options">
            <div class="theme-option" data-theme="default" onclick="changeTheme('default')">
                <div class="theme-preview default-theme"></div>
                <span>Purple Cyan</span>
            </div>
            <div class="theme-option" data-theme="blue" onclick="changeTheme('blue')">
                <div class="theme-preview blue-theme"></div>
                <span>Ocean Blue</span>
            </div>
            <div class="theme-option" data-theme="green" onclick="changeTheme('green')">
                <div class="theme-preview green-theme"></div>
                <span>Emerald Green</span>
            </div>
            <div class="theme-option" data-theme="red" onclick="changeTheme('red')">
                <div class="theme-preview red-theme"></div>
                <span>Rose Red</span>
            </div>
            <div class="theme-option" data-theme="orange" onclick="changeTheme('orange')">
                <div class="theme-preview orange-theme"></div>
                <span>Sunset Orange</span>
            </div>
            <div class="theme-option" data-theme="dark" onclick="changeTheme('dark')">
                <div class="theme-preview dark-theme"></div>
                <span>Dark Minimal</span>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Stories Section -->
        <div class="story-section">
            <div class="story-content">
                <div class="story-header">
                </div>
                <div class="stories-container" id="storiesContainer">
                    <!-- Add Story Button (shown only when admin) -->
                    <!-- Existing stories will be added here dynamically -->
                </div>
                <div class="scroll-indicator left" id="storyNavLeft" onclick="scrollStories('left')">
                    <i class="fa-solid fa-chevron-left"></i>
                </div>
                <div class="scroll-indicator" id="storyNavRight" onclick="scrollStories('right')">
                    <i class="fa-solid fa-chevron-right"></i>
                </div>
            </div>
        </div>

        <div class="profile-container">
            <div class="profile-border">
                <div class="profile-content">
                    <img src="https://img.alfrsantv.com/img/f176356891083911.jpg" alt="Profile Picture"
                        class="profile-pic">
                    <div class="overlay"></div>
                    <div class="shine"></div>
                </div>
            </div>
            <div class="status-indicator" id="statusIndicator">
                <div class="status-icon"></div>
            </div>
            <div class="particles">
                <!-- Particles will be dynamically generated -->
            </div>
        </div>
        <h1 class="username">Ahmed</h1>
        <div class="social-links">
            <a href="https://www.facebook.com/ahmed.s6yed/" target="_blank" class="social-link">Facebook</a>
            <a href="https://github.com/iilemoz" target="_blank" class="social-link">GitHub</a>
            <a href="https://forum.xat.com/profile/63602/" target="_blank" class="social-link">Forum</a>
        </div>
    </div>

    <!-- Admin Gear Icon - Moved to bottom right of page -->
    <div class="admin-gear" onclick="handleGearClick()" title="Admin Settings">
        <i class="fa-solid fa-gear"></i>
    </div>

    <!-- Story Modal -->
    <div class="story-modal" id="storyModal">
        <div class="story-modal-content">
            <div class="story-modal-content-form">
                <button class="story-modal-close" onclick="closeStoryModal()">
                    <i class="fa-solid fa-times"></i>
                </button>
                <h3 style="background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 20px; text-align: center; font-weight: 800; font-size: 1.8rem;">Add New Story</h3>
                <form class="story-form" id="storyForm">
                    <div class="story-form-group">
                        <label class="story-form-label">Story Title (optional)</label>
                        <input type="text" class="story-form-input" id="storyTitle" placeholder="Enter story title...">
                    </div>
                    <div class="story-form-group">
                        <label class="story-form-label">Story Content (optional)</label>
                        <textarea class="story-form-textarea" id="storyContent"
                            placeholder="Share your story..."></textarea>
                    </div>
                    <div class="story-form-group">
                        <label class="story-form-label">Story Image (optional)</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="file" class="story-form-file" id="storyImageFile" accept="image/*"
                                style="display: none;">
                            <button type="button" onclick="document.getElementById('storyImageFile').click()"
                                class="upload-btn">
                                <i class="fa-solid fa-upload"></i> Upload Image
                            </button>
                            <span id="imageFileName" class="file-name"></span>
                        </div>
                        <div style="margin-top: 10px;">
                            <label class="story-form-label" style="font-size: 0.9rem;">Or use Image URL:</label>
                            <input type="url" class="story-form-input" id="storyImage"
                                placeholder="https://example.com/image.jpg">
                        </div>
                    </div>
                    <div class="story-form-group">
                        <label class="story-form-label">Story Video (optional)</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="file" class="story-form-file" id="storyVideoFile" accept="video/*"
                                style="display: none;">
                            <button type="button" onclick="document.getElementById('storyVideoFile').click()"
                                class="upload-btn">
                                <i class="fa-solid fa-upload"></i> Upload Video
                            </button>
                            <span id="videoFileName" class="file-name"></span>
                        </div>
                        <div style="margin-top: 10px;">
                            <label class="story-form-label" style="font-size: 0.9rem;">Or use Video URL:</label>
                            <input type="url" class="story-form-input" id="storyVideo"
                                placeholder="https://www.youtube.com/watch?v=... or direct video URL">
                            <small style="color: #aaa; font-size: 0.9rem; margin-top: 5px; display: block;">
                                <i class="fa-solid fa-info-circle"></i> Supports YouTube, YouTube Shorts, and direct video
                                URLs
                            </small>
                        </div>
                    </div>
                    
                    <!-- Thumbnail Generation Status -->
                    <div class="story-form-group" id="thumbnailGenerationStatus" style="display: none; margin-top: 15px; padding: 12px; border-radius: 8px; background: rgba(187, 134, 252, 0.1); border: 1px solid rgba(187, 134, 252, 0.3);">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <i class="fa-solid fa-images" style="color: var(--accent-color); font-size: 1.2rem;"></i>
                            <span id="thumbnailStatusText" style="color: var(--text-primary);">Generating thumbnail from video...</span>
                        </div>
                    </div>
                    
                    <button type="submit" class="story-form-submit">
                        <i class="fa-solid fa-paper-plane"></i> Share Story
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard (Hidden by default, shown only when admin is logged in) -->
    <div class="admin-dashboard" id="adminDashboard" style="display: none;">
        <div class="dashboard-container">
            <div class="dashboard-container-content">
                <div class="dashboard-header">
                    <h2><i class="fa-solid fa-user-shield"></i> Admin Dashboard</h2>
                    <div class="dashboard-header-actions">
                        <button class="dashboard-logout" onclick="showLogoutConfirm()" title="Logout">
                            <i class="fa-solid fa-sign-out-alt"></i>
                        </button>
                        <button class="dashboard-close" onclick="toggleDashboard()">
                            <i class="fa-solid fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="totalStories">0</div>
                        <div class="stat-label">Total Stories</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalViews">0</div>
                        <div class="stat-label">Total Views</div>
                    </div>
                </div>
                
                <div class="dashboard-actions">
                    <button class="dashboard-btn" onclick="openStoryModalFromDashboard()">
                        <i class="fa-solid fa-plus"></i> Add New Story
                    </button>
                    <button class="dashboard-btn" onclick="loadStories()">
                        <i class="fa-solid fa-sync"></i> Refresh Data
                    </button>
                </div>
                
                <div class="recent-stories">
                    <h3><i class="fa-solid fa-history"></i> Recent Stories</h3>
                    <div class="stories-list" id="recentStoriesList">
                        <!-- Stories will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>

    <!-- Configuration & Scripts -->
    <script src="config.js"></script>
    <script type="module" src="script.js"></script>
    <script src="stories.js"></script>
</body>

</html>